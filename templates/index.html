<!-- templates/index.html -->
{% extends "base.html" %}

{% block content %}
<div class="card">
    <div class="card-header">
        <h2><i class="fas fa-newspaper"></i> 記事生成</h2>
    </div>
    <div class="card-body">
        <form action="/generate" method="post" class="article-form">
            <div class="form-group">
                <label for="keyword">キーワード:</label>
                <div class="input-with-suggestions">
                    <input type="text" id="keyword" name="keyword" required placeholder="記事のキーワードを入力">
                    {% if keyword_suggestions %}
                    <div class="suggestions">
                        <p>候補キーワード:</p>
                        <div class="tag-container">
                            {% for keyword in keyword_suggestions %}
                            <span class="tag" onclick="selectKeyword('{{ keyword }}')">{{ keyword }}</span>
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>
            
            <div class="form-group">
                <label for="temperature">多様性 (0.1-1.0):</label>
                <div class="range-container">
                    <input type="range" id="temperature" name="temperature" min="0.1" max="1.0" step="0.1" value="0.7">
                    <span id="temperature-value">0.7</span>
                </div>
                <div class="range-labels">
                    <span>正確</span>
                    <span>バランス</span>
                    <span>創造的</span>
                </div>
            </div>
            
            <div class="form-actions">
                <button type="submit" class="btn primary-btn"><i class="fas fa-magic"></i> 記事を生成</button>
            </div>
        </form>
    </div>
</div>

<div class="card">
    <div class="card-header">
        <h2><i class="fas fa-chart-line"></i> API使用状況</h2>
    </div>
    <div class="card-body">
        <div class="api-stats">
            <div class="stat-item">
                <div class="stat-label">総生成回数</div>
                <div class="stat-value">{{ history|length }}</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">推定コスト</div>
                <div class="stat-value">${{ "%.4f"|format(total_cost) }}</div>
            </div>
        </div>
        <div class="api-info">
            <a href="/history" class="btn secondary-btn"><i class="fas fa-history"></i> 詳細履歴を表示</a>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    // 温度表示の更新
    document.getElementById('temperature').addEventListener('input', function() {
        document.getElementById('temperature-value').textContent = this.value;
    });
    
    // キーワード選択
    function selectKeyword(keyword) {
        document.getElementById('keyword').value = keyword;
    }
</script>
{% endblock %}
